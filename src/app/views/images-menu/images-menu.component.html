<c-row ngPreserveWhitespaces>
  <c-col xs="12">
    <c-card class="mb-4">
      <c-card-header>
        <strong>Search</strong>
      </c-card-header>
      <c-card-body>
        <form cRow (ngSubmit)="onSubmitFilter()">
          <div class="mb-3">
            <label cLabel class="visually-hidden" for="inlineFormInputGroupUsername">
              Image Title
            </label>
            <c-input-group>
              <span cInputGroupText>Image Title</span>
              <input cFormControl id="inlineFormInputGroupUsername"
                     [(ngModel)]="title"
                     placeholder="Input image title here" name="title"
              />
            </c-input-group>
          </div>
          <div class="mb-3">
            <label cLabel for="coordinate">
              Coordinate
              <c-form-check>
                <input [checked]="useCoordinateSearch" [(ngModel)]="useCoordinateSearch" cFormCheckInput
                       id="useCoordinateSearch"
                       type="checkbox"
                       name="useCoordinateSearch"
                />
                <label cFormCheckLabel for="useCoordinateSearch">Use Coordinate Search</label>
              </c-form-check>
            </label>
            <app-map-example id="coordinate" (latLongClicked)="handleLatLongClicked($event)"
                             [useCoordinateValue]="useCoordinateSearch"
                             [mapId]="'image-menu-map'"
            ></app-map-example>
          </div>
          <div class="mb-3">
            <button cButton type="submit">Submit</button>
          </div>
        </form>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<c-row ngPreserveWhitespaces>
  <c-col xs="12">
    <c-card class="mb-4">
      <c-card-header>
        <strong>Images</strong>
      </c-card-header>
      <c-card-body>
        <div class="mat-elevation-z8">
          <table cTable>
            <thead>
            <tr>
              <th scope="col">Preview</th>
              <th scope="col">Title</th>
              <th scope="col">Coordinate</th>
              <th scope="col">Bundle</th>
              <th scope="col">View</th>
            </tr>
            </thead>
            <tbody>
            <ng-container>
              <tr *ngFor="let image of images">
                <td><img class="image-preview" [src]="image.id! | imageThumbnail | async" [alt]="image.id"></td>
                <td>{{ image.title }}</td>
                <td>({{ image.latitude }} , {{ image.longitude }})</td>
                <td>
                  <c-badge *ngIf="image.productLevel === 'FREE'" color="info">{{ image.productLevel }}</c-badge>
                  <c-badge *ngIf="image.productLevel === 'PRO'" color="success">{{ image.productLevel }}</c-badge>
                  <c-badge *ngIf="image.productLevel === 'PREMIUM'" color="primary">{{ image.productLevel }}</c-badge>
                </td>
                <td>
                  <button class="btn btn-primary" *ngIf="canAccessImage(image)" (click)="gotoImagePage(image)">View
                  </button>
                  <button class="btn btn-primary" *ngIf="!canAccessImage(image)"
                          [cModalToggle]="verticallyCenteredModal.id" (click)="setupPopupData(image)">Upgrade
                    subscription!
                  </button>
                </td>
              </tr>
            </ng-container>
            </tbody>
          </table>
          <!--          <table mat-table [dataSource]="dataSource" matSort>-->
          <!--            &lt;!&ndash; Name Column &ndash;&gt;-->
          <!--            <ng-container matColumnDef="preview">-->
          <!--              <th mat-header-cell *matHeaderCellDef mat-sort-header> Preview</th>-->
          <!--              <td mat-cell *matCellDef="let row">-->
          <!--                <img class="image-preview" [src]="row.id | imageThumbnail | async" [alt]="row.id">-->
          <!--              </td>-->
          <!--            </ng-container>-->

          <!--            &lt;!&ndash; Progress Column &ndash;&gt;-->
          <!--            <ng-container matColumnDef="title">-->
          <!--              <th mat-header-cell *matHeaderCellDef mat-sort-header> Title</th>-->
          <!--              <td mat-cell *matCellDef="let row"> {{ row.title }}</td>-->
          <!--            </ng-container>-->

          <!--            &lt;!&ndash; Fruit Column &ndash;&gt;-->
          <!--            <ng-container matColumnDef="coordinate">-->
          <!--              <th mat-header-cell *matHeaderCellDef mat-sort-header> Coordinate</th>-->
          <!--              <td mat-cell *matCellDef="let row"> ({{ row.latitude }} , {{ row.longitude }})</td>-->
          <!--            </ng-container>-->

          <!--            &lt;!&ndash; Fruit Column &ndash;&gt;-->
          <!--            <ng-container matColumnDef="bundle">-->
          <!--              <th mat-header-cell *matHeaderCellDef mat-sort-header> Bundle</th>-->
          <!--              <td mat-cell *matCellDef="let row">-->
          <!--                <c-badge *ngIf="row.productLevel === 'FREE'" color="info">{{ row.productLevel }}</c-badge>-->
          <!--                <c-badge *ngIf="row.productLevel === 'PRO'" color="success">{{ row.productLevel }}</c-badge>-->
          <!--                <c-badge *ngIf="row.productLevel === 'PREMIUM'" color="primary">{{ row.productLevel }}</c-badge>-->
          <!--              </td>-->
          <!--            </ng-container>-->

          <!--            <ng-container matColumnDef="view">-->
          <!--              <th mat-header-cell *matHeaderCellDef mat-sort-header> View Total</th>-->
          <!--              <td mat-cell *matCellDef="let row">-->
          <!--                <button class="btn btn-primary" *ngIf="canAccessImage(row)" (click)="gotoImagePage(row)">View</button>-->
          <!--                <button class="btn btn-primary" *ngIf="!canAccessImage(row)"-->
          <!--                        [cModalToggle]="verticallyCenteredModal.id" (click)="setupPopupData(row)">Upgrade subscription!-->
          <!--                </button>-->
          <!--              </td>-->
          <!--            </ng-container>-->

          <!--            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>-->
          <!--            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>-->

          <!--            &lt;!&ndash; Row shown when there is no matching data. &ndash;&gt;-->
          <!--          </table>-->

          <!--          <mat-paginator-->
          <!--            #paginator-->
          <!--            [pageSizeOptions]="pageSizeOptions"-->
          <!--            [pageIndex]="pageIndex"-->
          <!--            [pageSize]="pageSize"-->
          <!--            [length]="totalItems"-->
          <!--            [showFirstLastButtons]="true"-->
          <!--            (page)="onPageChange($event)"-->
          <!--            aria-label="Select page of users">-->
          <!--          </mat-paginator>-->
        </div>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<c-modal #verticallyCenteredModal alignment="center" id="verticallyCenteredModal">
  <c-modal-header>
    <h5 cModalTitle>Upgrade your subscription!</h5>
    <button [cModalToggle]="verticallyCenteredModal.id" cButtonClose></button>
  </c-modal-header>
  <c-modal-body>
    <div>
      <span>{{ selectedImage.title }}</span>
      <br>
      <span>Only IDR {{ selectedImage.productLevel === "PRO" ? "70,000" : "100,000" }} !</span>
    </div>
  </c-modal-body>
  <c-modal-footer>
    <button [cModalToggle]="verticallyCenteredModal.id" cButton color="secondary">
      Cancel
    </button>
    <button cButton color="primary" (click)="upgradeSubscription(selectedImage.productLevel!)">Upgrade!</button>
  </c-modal-footer>
</c-modal>
